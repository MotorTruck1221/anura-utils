name: Check for new commits in the upstream repo

on:
  schedule:
    - cron: "2 2 */2 * *"
  workflow_dispatch:

jobs:
  check_new_commits:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'mercuryworkshop/anuraos'
          submodules: 'recursive'
          path: anura
      - name: Check for new commits
        run: |
          bash
          cd anura/ && git checkout v2.0
          output=$(git log --since="2 days ago")
          if [[ -n "$output" ]]; then
            echo "new commits! Generating new template files....."
          else
            echo "No output, exiting"
          fi
